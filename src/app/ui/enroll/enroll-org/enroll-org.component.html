<!--
Copyright 2020 Carnegie Mellon University. All Rights Reserved.
Released under a MIT (SEI)-style license. See LICENSE.md in the project root for license information.
-->

<ng-container *ngIf="profile">
  <div class="card">
    <div class="card-header text-uppercase text-center">
      <div class="row">
        <div class="col-lg-2"></div>
        <div class="col-lg-8">
          Select your Organization
        </div>
        <div class="col-lg-2">
          <a class="pull-right" routerLink="../enrollment">Next <i class="fa fa-chevron-right"></i></a>
        </div>
      </div>
    </div>
    <div class="card-body">
      <div class="col-lg-10 offset-lg-1" *ngIf="canSelect()">
        <p class="border-left border-warning p-2 ml-2">Please choose the organization you are associated with from the list below.</p>
        <input type="text" class="form-control" placeholder="Filter" (keyup)="filter($event)">
        <div class="row org p-1 m-1" *ngFor="let o of filteredOrgs" (click)="selected(o)" [class.active]="o === active">
          <div class="col-lg-1">
            <img class="rounded-logo" [src]="o.logo" alt="org" />            
          </div>
          <div class="col-lg-6">
            {{o.title}}
          </div>
          <div class="col-lg-3">
            {{o.name}}
          </div>
          <div class="col-lg-2">
            <button *ngIf="o === active" class="btn btn-success" (click)="saveOrganization()">Save</button>
          </div>
        </div>
      </div>
      <ng-container *ngIf="!canSelect()">
        <strong>
          <img [src]="active.logo" max-height="128px" />
          {{active.title}}
        </strong>
        <p class="border-left border-warning p-2 ml-2 mt-2">
          You have already confirmed your membership with <strong>{{active.name}}</strong>.
        </p>
      </ng-container>
    </div>
  </div>
</ng-container>

